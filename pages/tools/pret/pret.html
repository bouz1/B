<html>
  <head>
    <script src="main.js"></script>
    <link rel="stylesheet" href="layout.css">
    <!-- for ploting-->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  </head>
  <body onload="onload_init()">
    <page >
      <div class = "div_button_top">
        <button id="butt1" class="top_button" onclick="funtab(this)">
          Mensualité
        </button>
        <button id="butt2" class="top_button" onclick="funtab(this)">
          Financement
        </button>
        <button id="butt3" class="top_button" onclick="funtab(this)">
          Tab3
        </button>
      </div>
      <div class="tab_divs">
        <div class="div_tabi" id = "tab1">
          <div onclick="Mensualite_cal()" >
            <h1>
              Mensualité
            </h1>
            <label>Capitale</label>
            <input type="number"  id="cap1" value="200000"/>
            <br>
            <label>Taux (%)</label>
            <input type="number"  id="taux1" value="4.5" step="0.01"
                   oninput="tauxRange1.value = this.value"/>
            <br>
            <input type="range" min="0" max="10" value="4.5" step="0.01"
                   id="tauxRange1" oninput="taux1.value = this.value" >
            <br>
            <label>Durée de rembourssement (ans)</label>
            <input type="number"  id="duration1" value="25"/>
            <br>
            <button onclick="Mensualite_cal()">Calcul</button> 
            <br>
            <label>Mensualité</label>
            <input type="number"  id="Mens1"/>
            <br>
            <label>Total remboursé</label>
            <input type="number"  id="Tot1"/>
            <br>
            <label>Cout de crédit</label>
            <input type="number"  id="CoutCredit1"/>
            <br>
            <label>Cout mensuel de crédit</label>
            <input type="number"  id="CoutCreditMens1"/>
          </div>

        </div>
        <div class="div_tabi" id = "tab2">
          <h1>
            Plan de Fiancement
          </h1>
          <div>
            <h2> Dépense</h2>
            <label>Prix initial</label>
            <input type="number"  id="prix2" value="257800"/>
            <br>
            <label>Notaire: Pourcentage (%)</label>
            <input type="number"  id="NotPourc2" value="3" step="0.1"
                   oninput="NotCout2.value = this.value*prix2.value/100"/>
            <label>Notaire: Cout</label>
            <input type="number"  id="NotCout2" value=""/>
            <br>
            <label>Frais de dossier</label>
            <input type="number" id="FraisDoss2" value="500"/>
            <br>
            <label>Courtage</label>
            <input type="number"  id="courtage2" value="2000"/>
            <br>
            <label>Frais de garantie</label>
            <input type="number"  id="frais_garentie2" value="2312"/>
            <br>
            <button onclick="mainTAB2()">Calcul2</button> 
            <br>
            <label>Déponse total</label>
            <input type="number"  id="depTot2" value=""/>

            <h2> Financement</h2>
            <br>
            <label>Durée total (années)</label>
            <input type="number"  id="dureeTot2" value="25"/>
            <br>
            <label>Assurance % par an</label>
            <input type="number"  id="assurTaux" value="0.637"/>
            <br>
            <label>Autre charge</label>
            <input type="number"  id="autre_charge" value="90"/>
            <br>
            <label>Mensualité tot</label>
            <input type="number"  id="MensTot2" value="900"/>
            <table>
              <tr>
                <th>Type</th>
                <th>Montant</th>
                <th>Taux(%)</th>
                <th>Début(an)</th>
                <th>Fin(an)</th>
              </tr>
              <tr>
                <td>
                  <label>Apport Personnel</label>
                </td>
                <td>
                  <input type="number"  id="apporPers2" value="72000" step="1000"/>
                </td>
              </tr>
              <tr> 
                <td>
                  <label>PTZ</label>
                  <label>Max</label>
                  <input type="checkbox" id ="ptzCbx2" checked>
                </td>
                <td>
                  <input type="number"  id="PTZ2" />
                </td>
                <td>
                  <input type="number"  id="tauxPTZ2" value="0"/>                </td>
                <td>
                  <input type="number"  id="debutPTZ2" value="12"/>
                </td>
                <td>
                  <input type="number"  id="finPTZ2" value="23"/>
                </td>
              </tr>

              <tr>
                <td>
                  <label>Action Logement</label>
                  <label>Max</label>
                  <input type="checkbox" id ="actLogCbx2" checked>
                </td>
                <td>
                  <input type="number"  id="actLog2" value="30000" step="1000"/>
                </td>
                <td>
                  <input type="number"  id="tauxactLog2" value="1"/>
                </td>
                <td>
                  <input type="number"  id="debutactLog2" value="1"/>
                </td>
                <td>
                  <input type="number"  id="finactLog2" value="25"/>
                </td>
              </tr>
              <tr>
                <td>
                  <label>Prêt classique</label>
                </td>
                <td>
                  <input type="number"  id="pretclass2" value=""/>
                </td>
                <td>
                  <input type="number"  id="tauxpretclass2" value="4.5" step="0.01"/>
                </td>
                <td>
                  <input type="number"  id="debutpretclass2" value="1"/>
                </td>
                <td>
                  <input type="number"  id="finpretclass2" value="25"/>
                </td>
              </tr>
            </table>

            <label>Déponse total final</label>
            <lable>
            <input type="number"  id="depTotal2" value="0"/>
            <br>
            <label>Coût total du financement</label>
            <lable>
            <input type="number"  id="" value="0"/>
            <br>
            <label>x1</label>
            <lable>
            <input type="number"  id="" value="0"/>
            <br>
            <label>x1</label>
            <lable>
            <input type="number"  id="" value="0"/>
            <br>
              Details
            </lable>
            <input type="checkbox" id="show_details_2_cbx" 
            onclick="show_head_details2()" checked>

            </input>
          </div>
       

        <div id="det_div_ID2">
          <table id="det_table_ID2">
            <tr>
              <th rowspan="2">
                Mois
              </th>
              <th rowspan="2">
                Année
              </th>
              <th colspan="6">
                PTZ
              </th>
              <th colspan="6">
               Action logement
              </th>
              <th colspan="6">
                Prêt classique
               </th>
               <th rowspan="2">
                Interet tot
              </th>
              <th rowspan="2">
                Ass tot
              </th>

            </tr>
            <tr>
              <th>
                Mensualité sans assur
              </th>
              <th>
                Assurence
              </th>
              <th>
                Part interet
              </th>
              <th>
                Part capital
              </th>
              <th>
                cap rembour
              </th>
              <th>
                Reste capital
              </th>
              <th>
                Mensualité sans assur
              </th>
              <th>
                Assurence
              </th>
              <th>
                Part interet
              </th>
              <th>
                Part capital
              </th>
              <th>
                cap rembour
              </th>
              <th>
                Reste capital
              </th>
              <th>
                Mensualité sans assur
              </th>
              <th>
                Assurence
              </th>
              <th>
                Part interet
              </th>
              <th>
                Part capital
              </th>
              <th>
                cap rembour
              </th>
              <th>
                Reste capital
              </th>
            </tr>
          </table>
        </div>

        </div>
        <div class="div_tabi" id = "tab3">
          <h1>
            TAB3
          </h1>
          <label>Non du fichier</label>
          <lable>
          <input type="text"  id="File_name_savedID" value="Simulation Pret"/>
          
          <button onclick="save_inputs()">
            SAVE
          </button>

          



          <input type="file" id="upload" > <!--style="display: none;"-->
          <button onclick='read_inputs()' >
          Read
          </button>






          
          <div id="PlotID2" style="width:100%;max-width:800px"></div>
        </div>
      </div>


      <!--!script>
        /*********The plot doesn't work in main.js it must keeped in html fil /!\**************/

        var xArray = [50,60,70,80,90,100,110,120,130,140,150];
        var yArray = [7,8,8,9,9,9,10,11,14,14,15];
        var yArray2 = [7,8,8,9,9,9,10,11,14,14,15];

        // Define Data
        var data = [{
        x:xArray,
        y:yArray,
        //mode:"markers"
        mode: 'lines' ,
        fill: 'tozeroy', // area plot
        stackgroup: 'group1' // stackgroup name
        },
        {
        x:xArray,
        y:yArray2,
        //mode:"markers"
        mode: 'lines' ,
        fill: 'tozeroy', // area plot
        stackgroup: 'group1' // stackgroup name
        }];

        // Define Layout
        var layout = {
        xaxis: {range: [40, 160], title: "Square Meters _"},
        yaxis: {range: [5, 16], title: "Price in Millions"},  
        title: "House Prices vs. Size"
        };

        // Display using Plotly
        Plotly.newPlot("PlotID2", data, layout);




      </script-->

      <!--script>
          // Get the table element
          var table = document.getElementById("det_table_ID2");

          // Initialize an empty array to store the cell values
          var months = [];
          var actlog=[];
          var ptz=[];
          var pretnorm=[];

          // Iterate through the cells of the second row
          for (var i = 1; i < table.rows[1].cells.length; i++) {
              // Get the cell value and push it to the array
              months.push(table.rows[0].cells[i].textContent);
              actlog.push(table.rows[1].cells[i].textContent);
              ptz.push(table.rows[2].cells[i].textContent);
              pretnorm.push(table.rows[3].cells[i].textContent);
            }
            
                 // Define Data
        var data = [{
        x:months,
        y:pretnorm,
        //mode:"markers"
        mode: 'lines' ,
        fill: 'tozeroy', // area plot
        stackgroup: 'group1' // stackgroup name
        },
        {
        x:months,
        y:ptz,
        //mode:"markers"
        mode: 'lines' ,
        fill: 'tozeroy', // area plot
        stackgroup: 'group1' // stackgroup name
        }];

        // Define Layout
        var layout = {
        xaxis: {range: [40, 160], title: "Square Meters _"},
        yaxis: {range: [5, 16], title: "Price in Millions"},  
        title: "House Prices vs. Size"
        };

        // Display using Plotly
        Plotly.newPlot("PlotID2", data, layout);
      </script-->
      <style>

      </style>
    </page>
  </body>
</html>
